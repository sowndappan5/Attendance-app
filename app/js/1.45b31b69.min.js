/*! Analytics - Thu, 03 Oct 2024 20:18:32 GMT */
"use strict";(self.webpackChunkom_api_js=self.webpackChunkom_api_js||[]).push([[1],{9962:function(t,i,s){s.r(i),s.d(i,{default:function(){return g}});var e={};s.r(e),s.d(e,{GoogleAnalytics:function(){return h},GoogleAnalytics4:function(){return d},Native:function(){return r}});var a=s(3231),n=s(5728),o=s(3824);class r{constructor(t){this.type="native",this.analytics=t,this.C=t.C,this.enabled=!0,this.init()}init(){(0,o.trigger)(document,"Native.init",{Native:this,Campaign:this.C})}track=()=>{(0,o.trigger)(document,"Native.track",{Native:this,Campaign:this.C}),this.enabled&&this.run()};run=()=>{(0,o.trigger)(document,"Native.track",{Native:this,Campaign:this.C});let t="impression"===this.analytics.type?(0,o.getUrl)(this.C.defaults,"impressions"):(0,o.getUrl)(this.C.defaults,"conversions"),i={aid:this.C.defaults.user,cid:this.C.id,sid:this.C.Sites.current().id||0,rt:(0,o.visitorReturning)(),dv:a.A.get(),cty:this.C.type,url:(0,o.urlPath)(),v:5};this.request(t,i),(0,o.trigger)(document,"Native."+this.analytics.type,{Native:this,Campaign:this.C,data:i})};request=(t,i)=>{(new n.A).get(t,i).setCache(!1).setTimeout(5e3).send().then((()=>{})).catch((()=>{}))}}var c=s(1441),l=s(187);class h{constructor(t,i){this.analytics=t,this.C=t.C,this.id=i.id,this.type=i.type,this.settings=i.settings,this.object=null,this.tracker=null,this.ready=!1,this.enabled=!0,this.warned=!1,this.tries=0,void 0===window[c.GLOBAL_OM].scripts.analytics.googleAnalytics&&(window[c.GLOBAL_OM].scripts.analytics.googleAnalytics={data:{},error:"",object:null,status:"ready"}),this.init()}init(){if((0,o.trigger)(document,"GoogleAnalytics.init",{GoogleAnalytics:this,Campaign:this.C,version:3}),"failed"===window[c.GLOBAL_OM].scripts.analytics.googleAnalytics.status)return;if("loading"===window[c.GLOBAL_OM].scripts.analytics.googleAnalytics.status)return void this.C.Timeouts.set((()=>{this.init()}),500);if(8<++this.tries)return void l.A.debug("Google Analytics could not be initialized for the "+this.C.name+" ("+this.C.id+") campaign because the analytics object is invalid.");if(!this.settings.ua_id)return void(this.enabled=!1);void 0!==window.__gtagTracker?this.object=window.__gtagTracker:void 0!==window.__gaTracker?this.object=window.__gaTracker:void 0!==window.gaTracker?this.object=window.gaTracker:void 0!==window.__omGaTracker?this.object=window.__omGaTracker:void 0!==window.ga?this.object=window.ga:(0,o.hasProp)(window,"GoogleAnalyticsObject")&&void 0!==window[window.GoogleAnalyticsObject]&&(this.object=window[window.GoogleAnalyticsObject]);let t=Promise.resolve();this.object&&(0,o.hasProp)(this.object,"loaded")&&!0===this.object.loaded||(t=new Promise((t=>{if("loaded"===window[c.GLOBAL_OM].scripts.analytics.googleAnalytics.status)return t();window[c.GLOBAL_OM].scripts.analytics.googleAnalytics.status="loading",(0,o.addScript)(this.settings.url,!0,(()=>{window[c.GLOBAL_OM].scripts.analytics.googleAnalytics.status="loaded",this.object=window.ga,t()}),(()=>{window[c.GLOBAL_OM].scripts.analytics.googleAnalytics.status="failed",l.A.debug("Google Analytics could not be initialized for the "+this.C.name+" ("+this.C.id+") campaign because the script failed to load.")}))}))),t.then((()=>{this.ready=!0,this.object&&(0,o.hasProp)(this.object,"getAll")||(void 0!==window.ga&&(0,o.hasProp)(window.ga,"getAll")?this.object=window.ga:(this.object=null,this.C.Timeouts.set((()=>{this.init()}),500)))}))}track=()=>{(0,o.trigger)(document,"GoogleAnalytics.track",{GoogleAnalytics:this,Campaign:this.C,version:3}),window["ga-disable-"+this.settings.ua_id]||this.enabled&&(this.ready||this.C.Timeouts.set((()=>{this.track()}),500),this.object&&(0,o.hasProp)(this.object,"getAll")&&((0,o.each)(this.object.getAll(),((t,i)=>{i.get("trackingId")===this.settings.ua_id&&(this.tracker=i)})),this.tracker||(this.object("create",this.settings.ua_id,"auto","omTracker"+this.C.id),(0,o.hasProp)(this.object,"getByName")&&(this.tracker=this.object.getByName("omTracker"+this.C.id))),this.tracker?(this.tracker.send("event",this.C.name,this.analytics.type,this.C.id,{nonInteraction:!0,_r:0}),(0,o.trigger)(document,"GoogleAnalytics."+this.analytics.type,{GoogleAnalytics:this,Campaign:this.C,version:3})):this.warned||(l.A.debug('A Google Analytics tracker could not be created or retrieved for the "'+this.C.name+'" campaign. Contact support for more details.'),this.warned=!0)))}}class d{constructor(t,i){this.analytics=t,this.C=t.C,this.id=i.id,this.type=i.type,this.settings=i.settings,this.object=null,this.tracker=null,this.ready=!1,this.enabled=!0,this.warned=!1,this.tries=0,this.dataLayerProp="dataLayer",this.gtagConfig={send_page_view:!1},void 0===window[c.GLOBAL_OM].scripts.analytics.googleAnalytics4&&(window[c.GLOBAL_OM].scripts.analytics.googleAnalytics4={data:{},error:"",object:null,status:"ready"}),this.init()}init(){if((0,o.trigger)(document,"GoogleAnalytics.init",{GoogleAnalytics:this,Campaign:this.C,version:4}),this.settings.ua_id||(this.enabled=!1),!this.enabled)return;if("failed"===window[c.GLOBAL_OM].scripts.analytics.googleAnalytics4.status)return;if("loading"===window[c.GLOBAL_OM].scripts.analytics.googleAnalytics4.status)return void this.C.Timeouts.set((()=>{this.init()}),500);if(8<++this.tries)return void l.A.debug("Google Analytics could not be initialized for the "+this.C.name+" ("+this.C.id+") campaign because the analytics object is invalid.");if(this.object||(void 0!==window.__gtagTracker&&(this.object=window.__gtagTracker),(0,o.isFunction)(window.gtag)&&(this.object=window.gtag)),this.object)return void(this.ready=!0);let t=Promise.resolve();this.object||(0,o.getDOMElement)(`script[src^="${this.settings.url}"]`)||(t=new Promise((t=>{if("loaded"===window[c.GLOBAL_OM].scripts.analytics.googleAnalytics4.status)return t();window[c.GLOBAL_OM].scripts.analytics.googleAnalytics4.status="loading",(0,o.addScript)(this.settings.url,!0,(()=>{if(window[c.GLOBAL_OM].scripts.analytics.googleAnalytics4.status="loaded",(0,o.trigger)(document,"GoogleAnalytics.gtagConfig",{GoogleAnalytics:this,Campaign:this.C,version:4}),!this.object){const t=this.dataLayerProp;window[t]=window[t]||[];const i=function(){window[t].push(arguments)};i("js",new Date),i("config",this.settings.ua_id,this.gtagConfig),this.object=i}t()}),(()=>{window[c.GLOBAL_OM].scripts.analytics.googleAnalytics4.status="failed",l.A.debug("Google Analytics could not be initialized for the "+this.C.name+" ("+this.C.id+") campaign because the script failed to load.")}))}))),t.then((()=>{this.ready=!0,this.object||(void 0!==window[this.dataLayerProp]?this.object=function(){window[this.dataLayerProp].push(arguments)}:(this.object=null,this.C.Timeouts.set((()=>{this.init()}),500)))}))}track=()=>{if((0,o.trigger)(document,"GoogleAnalytics.track",{GoogleAnalytics:this,Campaign:this.C,version:4}),window["ga-disable-"+this.settings.ua_id])return;if(!this.enabled)return;if(!this.ready)return void this.C.Timeouts.set((()=>{this.track()}),500);if(!this.object)return;if(this.tracker=this.object,!this.tracker)return void(this.warned||(l.A.debug('A Google Analytics tracker could not be created or retrieved for the "'+this.C.name+'" campaign. Contact support for more details.'),this.warned=!0));let t={name:`optinmonster_${this.analytics.type}`,params:{om_campaign_name:this.C.name,om_campaign_id:this.C.id,send_to:this.settings.ua_id}};(0,o.trigger)(document,"GoogleAnalytics.pre"+(0,o.toUpperCaseFirst)(this.analytics.type)+"Event",{GoogleAnalytics:this,Campaign:this.C,gaEvent:t}),this.tracker("event",t.name,t.params),(0,o.trigger)(document,"GoogleAnalytics."+this.analytics.type,{GoogleAnalytics:this,Campaign:this.C,version:4})}}class g{constructor(t){this.C=t,this.type="impression",this.tracked=[],this.analytics=[new r(this)],this.scrollElement=null,(0,o.each)(t.analytics,((t,i)=>{this.analytics.push(new(e[(0,o.convertClassName)(i.type)])(this,i))})),this.init()}init(){(0,o.trigger)(document,"Analytics.init",{Analytics:this,Campaign:this.C})}track=()=>{this.C.preview||this.C.override||this.C.ruleTest||(0,o.disableTrackingEnabled)()||"production"!==this.C.defaults.env||(0,o.inArray)(this.type,this.tracked)||((0,o.trigger)(document,`Analytics.${this.type}`,{Analytics:this,Campaign:this.C}),(0,o.trigger)(document,"Analytics.track",{Analytics:this,Campaign:this.C}),(0,o.each)(this.analytics,((t,i)=>{i.track()})),this.tracked.push(this.type))};impression=()=>{if(!this.C.Types.isInline()||this.visible())return this.type="impression",this.track();this.scrollOn()};scrollOn=()=>{(0,o.trigger)(document,"Analytics.init.scrollListener",{Analytics:this,Campaign:this.C}),this.scrollElement=this.scrollElement||this.C.getCustomScrollElement(window),(0,o.on)(this.scrollElement,"scroll.omAnalytics."+this.C.id,this.hasScrolled)};hasScrolled=()=>{this.C.Types.isInline()?this.visible()&&(this.type="impression",this.track(),this.scrollOff()):this.scrollOff()};visible=()=>49<this.C.Types.visible().percent;scrollOff=()=>{this.scrollElement=this.scrollElement||this.C.getCustomScrollElement(window),(0,o.off)(this.scrollElement,"scroll.omAnalytics."+this.C.id)};conversion=()=>{this.type="conversion",this.track()}}}}]);